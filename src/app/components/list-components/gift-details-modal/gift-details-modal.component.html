<div *ngIf="gift" [class]="isShown ? 'show backdrop' : 'hide backdrop'">
  <div class="modal">
    <app-page-heading
      [headingText]="gift.name"
      [buttons]="headingButtons"
      (onIconClick)="closeModal()"
      >
    </app-page-heading>
    <a [href]="gift.url">{{gift.url}}</a>
    <p>{{gift.details}}</p>
    <div *ngIf="type === 'shopping'; else wishList" class="status-display">
      <div class="line">
        <div *ngFor="let status of statuses" class="node" [style]="status.name === currentStatus ? 'color: green' : ''">
          <app-icon
            [icon]="status.icon"
            [hover]="false"
            (iconClicked)="onStatusUpdated.emit(status.name)"
            [title]="status.name"
            >
          </app-icon>
        </div>
      </div>
    </div>
    <ng-template #wishList>
      <ng-container *ngIf="gift.isWishedByID !== currentUser.id; else deleteGiftButton">
        <ng-container *ngIf="gift.isClaimedByID; else claimGiftButton">
          <ng-container *ngIf="gift.isClaimedByID === currentUser.id; else claimedByDifferentUser">
            <span>You have claimed this gift!</span>
          </ng-container>
          <ng-template #claimedByDifferentUser>
            <span>This gift has already been claimed!</span>
          </ng-template>
        </ng-container>
        <ng-template #claimGiftButton>
          <button (click)="onGiftClaim.emit(true)">Claim gift</button>
        </ng-template>
      </ng-container>
      <ng-template #deleteGiftButton>
        <app-pop-up
          buttonText="Delete gift"
          title="Are you sure you want to delete this gift?"
          body="This action cannot be undone."
          confirmText="Delete"
          (onConfirm)="this.onGiftDelete.emit(true)"
        >
        </app-pop-up>
      </ng-template>
    </ng-template>
  </div>
</div>